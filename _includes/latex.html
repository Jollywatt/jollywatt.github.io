{% if site.data.settings.use-katex %}
  <!-- KaTeX -->

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" integrity="sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn" crossorigin="anonymous">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js" integrity="sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous"></script>
  <script src="{{ site.github.url }}/assets/physics_macros.min.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
        window.macros_physics['\\op'] = "\\operatorname"
        renderMathInElement(document.body, {
          delimiters: [ // note: see kramdown's math block handling
            {left: '\\(', right: '\\)', display: false},
            {left: '\\[', right: '\\]', display: true}
          ],
          throwOnError : false,
          macros: macros_physics,
        });
    });
  </script>
  <style type="text/css">
    .katex { font-size: 1em; }
    .katex-display {
      overflow-x: scroll;
      padding: 3px 0;
    }
  </style>

{% else %}

  <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
  <script>
  window.MathJax = {
    loader: {load: ['[tex]/physics']},
    tex: {
      inlineMath: [['\\(', '\\)']],   // note: see kramdown's math block handling
      displayMath: [['\\[','\\]']],
      packages: {'[+]': ['physics']},
      macros: {
        RR: "\\mathbb{R}",
        CC: "\\mathbb{C}",
        ZZ: "\\mathbb{Z}",
      }
    },
  };
  </script>

{% endif %}